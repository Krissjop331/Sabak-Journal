{% extends "base.html" %} {% block title %}–°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
–ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏{% endblock %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <div class="bg-white rounded-lg shadow-lg p-6">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-3xl font-bold text-gray-800">
        –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
      </h1>
      <a
        href="{% url 'home' %}"
        class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded"
      >
        ‚Üê –ù–∞–∑–∞–¥
      </a>
    </div>

    {% if lessons_without_full_attendance %}
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg
            class="h-5 w-5 text-yellow-400"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-yellow-800">
            –ù–∞–π–¥–µ–Ω—ã —É—Ä–æ–∫–∏ —Å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
          </h3>
          <div class="mt-2 text-sm text-yellow-700">
            <p>
              –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ {{ lessons_without_full_attendance|length }} —É—Ä–æ–∫(–æ–≤)
              –±–µ–∑ –ø–æ–ª–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏, –µ—Å–ª–∏ —É—Ä–æ–∫–∏
              –±—ã–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø—ã.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="overflow-x-auto mb-6">
      <table class="min-w-full bg-white border border-gray-200 rounded-lg">
        <thead class="bg-gray-50">
          <tr>
            <th
              class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
            >
              –î–∞—Ç–∞
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
            >
              –ü—Ä–µ–¥–º–µ—Ç
            </th>
            <th
              class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
            >
              –ì—Ä—É–ø–ø–∞
            </th>
            <th
              class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
            >
              –°—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ
            </th>
            <th
              class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
            >
              –ó–∞–ø–∏—Å–µ–π –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
            </th>
            <th
              class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
            >
              –ù–µ–¥–æ—Å—Ç–∞–µ—Ç –∑–∞–ø–∏—Å–µ–π
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% for lesson_data in lessons_without_full_attendance %}
          <tr class="hover:bg-gray-50">
            <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
              {{ lesson_data.lesson.date|date:"d.m.Y" }}
            </td>
            <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
              <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
              >
                {{ lesson_data.lesson.subject.name }}
              </span>
            </td>
            <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
              {{ lesson_data.lesson.group.name }}
            </td>
            <td
              class="px-4 py-4 whitespace-nowrap text-center text-sm text-gray-900"
            >
              {{ lesson_data.students_count }}
            </td>
            <td
              class="px-4 py-4 whitespace-nowrap text-center text-sm text-gray-900"
            >
              {{ lesson_data.attendance_count }}
            </td>
            <td class="px-4 py-4 whitespace-nowrap text-center">
              <span
                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"
              >
                {{ lesson_data.missing_count }}
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <form method="post" class="text-center">
      {% csrf_token %}
      <button
        type="submit"
        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200"
        onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')"
      >
        üîß –°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∑–∞–ø–∏—Å–∏
      </button>
    </form>

    {% else %}
    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg
            class="h-5 w-5 text-green-400"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </div>
        <div class="ml-3">
          <h3 class="text-sm font-medium text-green-800">–í—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ!</h3>
          <div class="mt-2 text-sm text-green-700">
            <p>
              –í—Å–µ —É—Ä–æ–∫–∏ –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö
              –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
            </p>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
